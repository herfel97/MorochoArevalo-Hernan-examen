<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a="http://xmlns.jcp.org/jsf/passth/rough"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<title>Kushki Bank</title>
</h:head>
<ui:composition template="plantillaAdmin.xhtml">
	<body>
		<ui:define name="formAdmin">
			<div class="container-fluid">
				<div class="row-fluid">
					<div class="span12">
						<div class="widget-box">
							<div class="widget-content nopadding" style="color: black">
								<h3 class="box-title" align="center">Nuevo Pedido</h3>

								<div align="center">
									<h:form>
										<p:outputLabel value="Fecha" />
										<p:outputLabel value="#{pedidoBean.fecha}" />
										
										<p:outputLabel value="Comidas" />
										<p:selectOneMenu value="#{pedidoBean.comida}"
											converter="omnifaces.SelectItemsConverter">
											<f:selectItem noSelectionOption="true" itemLabel="Seleccione"
												itemValue="#{null}" />
											<f:selectItems value="#{pedidoBean.listaComidas}" var="com"
												itemLabel="#{com.nombre}" itemValue="#{com}">
											</f:selectItems>
										</p:selectOneMenu>

										<p:outputLabel value="Cantidad" />
										<p:inputText value="#{pedidoBean.cantidad}" />

										<p:commandButton action="Agregar" value="Agregar"
											actionListener="#{pedidoBean.agregar()}"
											update="detalle tot subt iva" />

										<p:dataTable id="detalle" value="#{pedidoBean.listaDetalles}"
											var="det">
											<p:column headerText="Comida">
														#{det.comida.nombre}
													</p:column>
											<p:column headerText="Precio">
														$ #{det.comida.precioUnitario}
													</p:column>
											<p:column headerText="Cantidad">
														#{det.cantidad}
													</p:column>
											<p:column headerText="Subtotal">
														$ #{det.subtotal}
													</p:column>

											<p:column headerText="....">
												<p:commandButton value="Remover" icon="ui-icon-circle-close"
													action="#{bean.delete(i.id)}" />
											</p:column>
										</p:dataTable>
										<br />
										<p:outputLabel id="subt">Subtotal:$ #{pedidoBean.subtotal}</p:outputLabel>
										<p:outputLabel id="iva">IVA 12%: $ #{pedidoBean.IVA}</p:outputLabel>
										<p:outputLabel id="tot">Total:$ #{pedidoBean.total}</p:outputLabel>

										<br />
										<br />
										<p:outputLabel>Pago</p:outputLabel>
										
										<p:selectOneMenu value="#{pedidoBean.comida}"
											converter="omnifaces.SelectItemsConverter">
											<f:selectItem noSelectionOption="true" itemLabel="Seleccione"
												itemValue="#{null}" />
											<f:selectItems value="#{pedidoBean.listaTarjetas}" var="tar"
												itemLabel="#{tar.numeroTarjeta}" itemValue="#{tar}">
											</f:selectItems>
										</p:selectOneMenu>
										
										
										<p:commandButton value="Seleccionar Metodo de Pago"></p:commandButton>

										<p:commandButton value="Registrar Pedido" />

									</h:form>
									
									 <h:form>
                                    <h:commandLink class="btn btn-primary" 
                                                   id="btn-modal-crear"
                                                   a:data-toggle="modal" 
                                                   a:data-target="#mediumModal" 
                                                   value="+ Agregar" 
                                                   action="#{pedidoBean.newProducto}" 
                                                   >
                                        <f:ajax execute="btn-modal-crear" render="mediumModal" />
                                    </h:commandLink>

                                </h:form>
									
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>


			<div class="modal fade" id="mediumModal" tabindex="-1" role="dialog"
				aria-labelledby="mediumModalLabel" aria-hidden="true">
				<div class="modal-dialog modal-lg" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title" id="mediumModalLabel">Agregar
								Producto</h5>
							<button type="button" class="close" data-dismiss="modal"
								aria-label="Close">
							</button>
						</div>
						<h:form>
							<div class="modal-body">

								<div class="form-row">
									<div class="form-group col-md-6">
										<label for="producto-nombre">Nombre</label>
										<h:inputText class="form-control" id="producto-nombre"
											value="null}" required="true"
											requiredMessage="Campo Obligatorio" />
										<h:message for="producto-nombre" style="color:red" />
									</div>
									<div class="form-group col-md-6">
										<label for="producto-categoria">Categoria</label>
										<h:message for="producto-categoria" style="color:red" />
									</div>
								</div>

								<div class="form-row">
									<div class="form-group col-md-8">
										<label for="producto-unidad">Unidad de medida</label>
										<h:selectOneMenu class="form-control" id="producto-unidad"
											value="#{null}">
											<f:selectItems value="#{productoBean.unidadMedidas}" />
										</h:selectOneMenu>
										<h:message for="producto-unidad" style="color:red" />
									</div>
									<div class="form-group col-md-4">
										<label for="producto-precio">Precio unitario</label>
										<h:inputText class="form-control" id="producto-precio"
											value="#{null}" converter="javax.faces.Double" />
										<h:message for="precio" style="color:red" />
									</div>
								</div>

								<div class="modal-footer">
									<button type="button" class="btn btn-secondary"
										data-dismiss="modal">Cancel</button>
									<h:commandButton class="btn btn-success" value="Crear Producto"
										action="#{productoBean.add}" />
								</div>
							</div>
						</h:form>
					</div>
				</div>
			</div>
			<!-- END Modal -->


		</ui:define>
	</body>
</ui:composition>
</html>